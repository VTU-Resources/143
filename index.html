<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy New Year 2026</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Confetti Script (Required) -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;1,400&family=Great+Vibes&family=Playfair+Display:ital,wght@0,400;0,600;0,800;1,400&display=swap" rel="stylesheet">

    <!-- React & DOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    
    <!-- Framer Motion -->
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Custom Styles & Animations */
        body {
            margin: 0;
            overflow: hidden;
            background-color: #FFFDF7;
            font-family: 'Playfair Display', serif;
        }

        .font-playfair { font-family: 'Playfair Display', serif; }
        .font-cormorant { font-family: 'Cormorant Garamond', serif; }
        .font-great-vibes { font-family: 'Great Vibes', cursive; }

        @keyframes shimmer {
            0% { transform: translateX(-100%) skewX(12deg); }
            100% { transform: translateX(200%) skewX(12deg); }
        }
        .animate-shimmer {
            animation: shimmer 3s infinite;
        }

        @keyframes rotateEarth {
            0% { background-position: 0 0; }
            100% { background-position: 200% 0; }
        }

        .earth-3d {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: url('https://upload.wikimedia.org/wikipedia/commons/thumb/2/23/Blue_Marble_2002.png/1024px-Blue_Marble_2002.png');
            background-size: cover;
            box-shadow: inset 16px 0 40px 6px rgba(0,0,0,0.9),
                        inset -3px 0 6px 2px rgba(255,255,255,0.2),
                        0 0 20px rgba(50, 100, 255, 0.4);
            animation: rotateEarth 20s linear infinite;
            position: relative;
        }
        .earth-3d::after {
            content: "";
            position: absolute;
            inset: -5px;
            border-radius: 50%;
            box-shadow: 0 0 30px 5px rgba(100, 180, 255, 0.3);
            opacity: 0.8;
        }

        .perspective-1000 { perspective: 1000px; }
        .transform-style-3d { transform-style: preserve-3d; }
        
        .custom-scrollbar::-webkit-scrollbar { width: 3px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #D4AF37; border-radius: 4px; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback } = React;
        const { motion, AnimatePresence } = window.Motion || window.framerMotion || {};

        if (!motion) {
             console.error("Framer Motion not loaded correctly.");
        }

        // --- Configuration ---
        const MUSIC_URL = "cs.mp3"; 
        
        const IMAGES = [
            '1.png', 
            '2.png', 
            '3.png', 
            '4.png', 
            '5.png'
        ]; 
        
        const FLYING_PHOTO_SRC = "papu.png"; 
        
        const PALACE_IMG = "sc.png"; 

        const TEXT_LINES = [
            "Ninu nanna Pancha Prana Kandama",
            "Ninu nanna Devate Kandama",
            "Ninne nanna jeeva ninne nanna jeevana Kandama",
            "Ninantha est best precious nan muddina henthi nan papu devate kandama na padiyoke nanu thumba thumba infinity astu punya madedini bangara",
            "I'm infinity astu soooooo sooooo blessed to have you papu devate kandama",
            "You are my strength happiness everything and everyone papu devate kandama",
            "Nin ilde nan ela Nan elde nin ela Papu kandamas",
            "CSourworldforever",
            "ShridharChaithraforever",
            "Kandamas",
            "Best precious Couples in the universe solar system",
            "You are rare special precious purest daimond nan muddina henthi nan papu devate kandama",
            "I'm soo soooo infinity astu sooo proud to be your wife"
        ];

        // --- Icons (Inline SVG) ---
        const IconWrapper = ({ children, size = 24, className = "", fill="none", ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill={fill} stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>
                {children}
            </svg>
        );

        const Heart = (props) => <IconWrapper {...props}><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></IconWrapper>;
        const Sparkles = (props) => <IconWrapper {...props}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 5H5"/><path d="M19 14v4"/><path d="M23 16h-4"/></IconWrapper>;
        const ImageIcon = (props) => <IconWrapper {...props}><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></IconWrapper>;
        const InfinityIcon = (props) => <IconWrapper {...props}><path d="M12 12c-2-2.67-4-4-6-4a4 4 0 1 0 0 8c2 0 4-1.33 6-4Zm0 0c2 2.67 4 4 6 4a4 4 0 1 0 0-8c-2 0-4 1.33-6 4Z"/></IconWrapper>;
        const Crown = (props) => <IconWrapper {...props}><path d="m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"/></IconWrapper>;
        const Volume2 = (props) => <IconWrapper {...props}><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14"/></IconWrapper>;
        const VolumeX = (props) => <IconWrapper {...props}><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><line x1="23" x2="17" y1="9" y2="15"/><line x1="17" x2="23" y1="9" y2="15"/></IconWrapper>;
        const Star = (props) => <IconWrapper {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></IconWrapper>;
        const Gem = (props) => <IconWrapper {...props}><path d="M6 3h12l4 6-10 13L2 9Z"/></IconWrapper>;
        const Sun = (props) => <IconWrapper {...props}><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></IconWrapper>;
        const Rocket = (props) => <IconWrapper {...props}><path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"/><path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"/><path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"/><path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"/></IconWrapper>;
        const Castle = (props) => <IconWrapper {...props}><path d="M22 20v-9H2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2Z"/><path d="M18 11V4H6v7"/><path d="M15 22v-4a3 3 0 0 0-6 0v4"/><path d="M22 11h-4a5 5 0 0 0-10 0H4"/></IconWrapper>;


        // --- Helper Components ---

        const GoldText = ({ children, className = "", size = "text-lg" }) => (
            <span className={`${className} ${size} font-bold text-transparent bg-clip-text bg-gradient-to-b from-[#BF953F] via-[#FCF6BA] to-[#B38728] drop-shadow-sm`}>
                {children}
            </span>
        );

        const RoyalCard = ({ children, delay = 0 }) => (
            <motion.div
                initial={{ opacity: 0, y: 30 }}
                animate={{ opacity: 1, y: 0 }}
                transition={{ delay, duration: 0.8 }}
                className="relative p-6 md:p-8 rounded-xl bg-[#FFFDF7] border-4 border-double border-[#D4AF37]/40 shadow-[0_10px_30px_rgba(212,175,55,0.15)] max-w-sm mx-auto my-4 text-center overflow-hidden"
            >
                <div className="absolute top-2 left-1/2 -translate-x-1/2 text-[#D4AF37]">
                    <Crown size={16} />
                </div>
                <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-[#D4AF37]/50 to-transparent"></div>
                <div className="relative z-10">
                    {children}
                </div>
                <div className="absolute bottom-2 left-1/2 -translate-x-1/2 text-[#D4AF37]/50">
                    <Star size={10} />
                </div>
            </motion.div>
        );

        const ParticleBackground = () => (
            <div className="absolute inset-0 overflow-hidden pointer-events-none z-0">
                {[...Array(20)].map((_, i) => (
                    <motion.div
                        key={i}
                        className="absolute rounded-full blur-[1px]"
                        initial={{
                            x: Math.random() * 100 + "%",
                            y: Math.random() * 100 + "%",
                            scale: Math.random() * 0.5 + 0.5,
                            opacity: 0,
                            backgroundColor: i % 2 === 0 ? "#FFD700" : "#FFF8DC"
                        }}
                        animate={{
                            y: [null, Math.random() * -100],
                            opacity: [0, 1, 0],
                        }}
                        transition={{
                            duration: Math.random() * 10 + 10,
                            repeat: Infinity,
                            ease: "linear",
                            delay: Math.random() * 5
                        }}
                        style={{
                            width: Math.random() * 3 + 1 + "px",
                            height: Math.random() * 3 + 1 + "px",
                        }}
                    />
                ))}
            </div>
        );

        const DiamondRain = ({ count = 20 }) => (
            <div className="absolute inset-0 pointer-events-none z-0 overflow-hidden">
                {[...Array(count)].map((_, i) => (
                    <motion.div
                        key={i}
                        initial={{ y: -100, x: Math.random() * window.innerWidth, rotate: 0, opacity: 0 }}
                        animate={{ 
                            y: window.innerHeight + 100, 
                            rotate: 360, 
                            opacity: [0, 1, 1, 0] 
                        }}
                        transition={{ 
                            duration: Math.random() * 5 + 5, 
                            repeat: Infinity, 
                            delay: Math.random() * 5,
                            ease: "linear"
                        }}
                        className="absolute"
                    >
                        <Gem 
                            size={Math.random() * 15 + 8} 
                            className="text-[#b9f2ff] drop-shadow-[0_0_8px_rgba(185,242,255,0.8)]" 
                            fill="rgba(255,255,255,0.4)"
                        />
                    </motion.div>
                ))}
            </div>
        );

        const SplashParticles = () => (
            <div className="absolute inset-0 pointer-events-none overflow-hidden z-20">
                {[...Array(20)].map((_, i) => (
                    <motion.div
                        key={i}
                        initial={{ 
                            x: "50%", 
                            y: "50%", 
                            scale: 0, 
                            opacity: 1 
                        }}
                        animate={{ 
                            x: `${Math.random() * 120 - 10}%`, 
                            y: `${Math.random() * 120 - 10}%`, 
                            scale: [0, 1.5, 0],
                            opacity: [0, 1, 0],
                            rotate: Math.random() * 360
                        }}
                        transition={{ 
                            duration: 1.5, 
                            ease: "easeOut",
                            delay: Math.random() * 0.5,
                            repeat: Infinity,
                            repeatDelay: 1
                        }}
                        className="absolute"
                    >
                        {i % 2 === 0 ? (
                            <Sparkles className="text-[#D4AF37]" size={Math.random() * 20 + 10} fill="#D4AF37" />
                        ) : (
                            <Gem className="text-[#b9f2ff]" size={Math.random() * 15 + 10} fill="rgba(255,255,255,0.8)" />
                        )}
                    </motion.div>
                ))}
            </div>
        );

        const ClickSparkle = () => {
            const [sparks, setSparks] = useState([]);

            useEffect(() => {
                const handleClick = (e) => {
                    const x = 'touches' in e ? e.touches[0].clientX : e.clientX;
                    const y = 'touches' in e ? e.touches[0].clientY : e.clientY;
                    const id = Date.now();
                    setSparks(prev => [...prev, { id, x, y }]);
                    setTimeout(() => setSparks(prev => prev.filter(s => s.id !== id)), 1000);
                };

                window.addEventListener('click', handleClick);
                return () => window.removeEventListener('click', handleClick);
            }, []);

            return (
                <React.Fragment>
                    {sparks.map(s => (
                        <motion.div
                            key={s.id}
                            initial={{ scale: 0, opacity: 1, x: s.x, y: s.y }}
                            animate={{ scale: 2, opacity: 0 }}
                            transition={{ duration: 0.8 }}
                            className="fixed pointer-events-none z-[100] text-[#FCF6BA]"
                        >
                            <Sparkles size={24} />
                        </motion.div>
                    ))}
                </React.Fragment>
            );
        };

        // --- Views ---

        const SplashView = ({ startJourney, skipToHome }) => {
            const lastTapRef = useRef(0);
            const tapCountRef = useRef(0);

            // SECRET LOGIC: 3 Taps within 600ms of each other trigger skipping
            // UPDATED: Using a slightly longer timeout and safe handling
            const handleSecretTap = (e) => {
                // e.stopPropagation(); // Optional, but usually better to let it bubble if needed
                
                const now = Date.now();
                
                // If the last tap was less than 600ms ago, increment count
                if (now - lastTapRef.current < 600) {
                    tapCountRef.current += 1;
                } else {
                    // Reset if too slow
                    tapCountRef.current = 1;
                }
                
                lastTapRef.current = now;

                if (tapCountRef.current === 3) {
                    console.log("Secret unlocked! Skipping to home...");
                    skipToHome();
                    tapCountRef.current = 0;
                }
            };

            return (
            <motion.div 
                className="flex flex-col items-center justify-center h-full text-center p-6 relative z-10 overflow-hidden"
                initial={{ opacity: 0 }}
                animate={{ opacity: 1 }}
                exit={{ opacity: 0, scale: 1.2, filter: "blur(10px)" }}
                transition={{ duration: 0.5 }}
            >
                <motion.div
                    initial={{ height: "100%" }}
                    animate={{ height: "0%" }}
                    transition={{ duration: 1.2, ease: "easeInOut", delay: 0.2 }}
                    className="absolute top-0 left-0 w-full bg-gradient-to-b from-[#8a6d3b] via-[#D4AF37] to-[#FFF8DC] z-50 pointer-events-none"
                >
                    <div className="absolute bottom-0 w-full h-20 bg-gradient-to-t from-white/40 to-transparent" />
                </motion.div>
                <div className="absolute top-0 left-0 w-full h-1/2 bg-gradient-to-b from-amber-100/20 to-transparent pointer-events-none" />
                <SplashParticles />
                <motion.div
                    initial={{ scale: 0, rotateY: 180 }}
                    animate={{ 
                        scale: 1, 
                        rotateY: 0,
                        boxShadow: ["0px 0px 20px rgba(191, 149, 63, 0.3)", "0px 0px 60px rgba(191, 149, 63, 0.8)", "0px 0px 20px rgba(191, 149, 63, 0.3)"],
                    }}
                    transition={{ 
                        scale: { duration: 0.8, type: "spring", stiffness: 100 },
                        rotateY: { duration: 1.5, ease: "circOut" },
                        boxShadow: { duration: 2, repeat: Infinity }
                    }}
                    className="rounded-full p-8 bg-gradient-to-br from-[#FFFDF7] to-[#FFF8DC] border-2 border-[#FBF5B7] mb-8 relative z-30 perspective-1000 transform-style-3d"
                >
                    <motion.div
                        animate={{ rotate: 0 }}
                        transition={{ duration: 20, repeat: Infinity, ease: "linear" }}
                    >
                        <Crown className="w-16 h-16 text-[#BF953F] drop-shadow-[0_0_10px_rgba(212,175,55,0.8)]" />
                    </motion.div>
                    <motion.div 
                        className="absolute top-0 left-0 w-full h-full"
                        animate={{ rotate: -360 }}
                        transition={{ duration: 8, repeat: Infinity, ease: "linear" }}
                    >
                        <Sparkles className="absolute top-2 right-2 text-[#AA771C] animate-pulse" size={16} />
                    </motion.div>
                </motion.div>
                
                {/* THIS IS THE MARKED PLACE FOR SECRET TAP */}
                {/* UPDATED: Added touch-manipulation and onPointerDown for instant mobile response */}
                <motion.div 
                    initial={{ y: -50, opacity: 0 }}
                    animate={{ y: 0, opacity: 1 }}
                    transition={{ delay: 0.8, duration: 0.6, type: "spring" }}
                    className="mb-4 relative z-30 cursor-pointer select-none touch-manipulation"
                    onPointerDown={handleSecretTap} 
                >
                    <h1 className="font-playfair text-4xl md:text-5xl font-bold tracking-tight mb-2 pointer-events-none">
                        <span className="text-transparent bg-clip-text bg-gradient-to-r from-[#996515] via-[#D4AF37] to-[#996515] drop-shadow-sm">Happy New Year</span>
                        <br />
                        <motion.span 
                            initial={{ scale: 0.5, opacity: 0 }}
                            animate={{ scale: 1, opacity: 1 }}
                            transition={{ delay: 1, type: "spring" }}
                            className="font-great-vibes text-5xl text-[#AA771C] inline-block"
                        >My Wife</motion.span>
                    </h1>
                </motion.div>
                
                <motion.p 
                    className="font-cormorant text-xl text-[#8a6d3b] italic tracking-wide mb-12 max-w-xs leading-relaxed relative z-30"
                    initial={{ opacity: 0, y: 20 }}
                    animate={{ opacity: 1, y: 0 }}
                    transition={{ delay: 1.2, duration: 0.5 }}
                >
                    ‚ÄúBest Precious Goddess of my Life‚Äù
                </motion.p>
                <motion.div
                    initial={{ opacity: 0, scale: 0.9 }}
                    animate={{ opacity: 1, scale: 1 }}
                    transition={{ delay: 1.5, duration: 0.5 }}
                    className="relative z-30"
                >
                    <motion.button
                        whileHover={{ scale: 1.05 }}
                        whileTap={{ scale: 0.95 }}
                        onClick={startJourney}
                        className="relative px-8 py-4 bg-gradient-to-r from-[#BF953F] via-[#FBF5B7] to-[#AA771C] text-[#5c3a00] font-serif tracking-widest uppercase text-xs font-bold rounded-full shadow-[0_0_30px_rgba(191,149,63,0.6)] border border-white/50 overflow-hidden group"
                    >
                        <div className="absolute inset-0 bg-white/40 skew-x-12 translate-x-[-100%] group-hover:animate-shimmer" />
                        <span className="relative z-10 flex items-center justify-center gap-2 drop-shadow-sm">
                            Kandamas Occupy Tech <Rocket size={14} className="group-hover:translate-x-1 transition-transform" />
                        </span>
                    </motion.button>
                </motion.div>
            </motion.div>
            );
        };

        const JourneyView = ({ setCurrentTab }) => {
            const [phase, setPhase] = useState(0); 

            useEffect(() => {
                const t1 = setTimeout(() => setPhase(1), 4000); 
                const t2 = setTimeout(() => setPhase(2), 10000); 
                const t3 = setTimeout(() => {
                    setPhase(3);
                    setTimeout(() => setCurrentTab('newYear'), 1000);
                }, 14000); 

                return () => { clearTimeout(t1); clearTimeout(t2); clearTimeout(t3); };
            }, []);

            const flyingPhotos = Array(15).fill(0).map((_, i) => ({
                id: i,
                delay: Math.random() * 8, 
                x: Math.random() * 100 - 50, 
                scale: Math.random() * 0.5 + 0.4
            }));

            const planets = [
                { name: "Mercury", color: "bg-gray-400", size: "w-6 h-6", delay: 0.2, xOffset: 20, yOffset: -20 },
                { name: "Venus", color: "bg-yellow-200", size: "w-10 h-10", delay: 0.8, xOffset: -30, yOffset: 10 },
                { name: "Mars", color: "bg-red-500", size: "w-8 h-8", delay: 1.5, xOffset: 40, yOffset: 30 },
                { name: "Jupiter", color: "bg-orange-300", size: "w-32 h-32", delay: 2.5, xOffset: -10, yOffset: -10, striped: true },
                { name: "Saturn", color: "bg-[#E3E0C0]", size: "w-24 h-24", delay: 3.5, xOffset: 25, yOffset: 20, ring: true },
                { name: "Uranus", color: "bg-cyan-200", size: "w-16 h-16", delay: 4.2, xOffset: -35, yOffset: -25 },
                { name: "Neptune", color: "bg-blue-600", size: "w-14 h-14", delay: 4.8, xOffset: 15, yOffset: 35 },
            ];

            return (
                <div className="relative w-full h-full bg-black overflow-hidden flex items-center justify-center perspective-1000">
                    <motion.div
                        initial={{ scale: 1.5, opacity: 1, z: 0 }}
                        animate={phase >= 1 ? { scale: 0.05, opacity: 0, z: -500 } : {}}
                        transition={{ duration: 3, ease: "easeInOut" }}
                        className="absolute flex flex-col items-center"
                    >
                        <div className="earth-3d"></div>
                        <motion.p 
                            initial={{ opacity: 0 }} 
                            animate={{ opacity: 1 }} 
                            transition={{ delay: 0.5 }}
                            className="text-white font-playfair mt-8 text-xl tracking-widest uppercase drop-shadow-md"
                        >Leaving Earth...</motion.p>
                    </motion.div>

                    {phase === 1 && (
                        <div className="absolute inset-0 w-full h-full flex items-center justify-center">
                            <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-50 animate-pulse" />
                            <motion.p 
                                initial={{ opacity: 0 }} 
                                animate={{ opacity: 1 }}
                                exit={{ opacity: 0 }}
                                className="absolute top-10 text-white/50 font-playfair text-sm tracking-[0.3em] uppercase"
                            >Passing Planets...</motion.p>
                            {planets.map((planet, idx) => (
                                <motion.div
                                    key={planet.name}
                                    initial={{ scale: 0, opacity: 0, x: 0, y: 0, z: -1000 }}
                                    animate={{ 
                                        scale: [0, 1.5, 3], 
                                        opacity: [0, 1, 0], 
                                        x: [0, planet.xOffset * 5],
                                        y: [0, planet.yOffset * 5],
                                        z: [0, 500]
                                    }}
                                    transition={{ 
                                        duration: 3, 
                                        delay: planet.delay, 
                                        ease: "easeInOut" 
                                    }}
                                    className="absolute flex flex-col items-center justify-center"
                                >
                                    <div className={`relative ${planet.size} rounded-full ${planet.color} shadow-[inset_-4px_-4px_10px_rgba(0,0,0,0.5)] flex items-center justify-center`}>
                                        {planet.striped && (
                                            <div className="absolute inset-0 rounded-full border-t-4 border-b-4 border-black/10 opacity-50" />
                                        )}
                                        {planet.ring && (
                                            <div className="absolute w-[160%] h-[30%] border-[6px] border-[#C0B080]/60 rounded-[50%] top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 -rotate-12" />
                                        )}
                                    </div>
                                    <span className="text-white/80 text-[10px] mt-2 font-serif tracking-widest uppercase">{planet.name}</span>
                                </motion.div>
                            ))}
                        </div>
                    )}

                    <motion.div
                        initial={{ opacity: 0, scale: 2 }}
                        animate={phase === 2 ? { opacity: 1, scale: 1 } : {}}
                        transition={{ duration: 2 }}
                        className="absolute inset-0 bg-gradient-to-br from-indigo-950 via-purple-950 to-black flex items-center justify-center"
                    >
                        <div className="absolute inset-0 opacity-40 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-amber-200/10 via-transparent to-transparent" />
                        <DiamondRain count={10} />
                        <p className="text-amber-100 font-great-vibes text-3xl animate-pulse relative z-10 drop-shadow-[0_0_10px_rgba(251,191,36,0.5)]">Entering CSourworldforever</p>
                    </motion.div>

                    {phase === 2 && flyingPhotos.map((photo) => (
                        <motion.div
                            key={photo.id}
                            initial={{ y: 800, x: 0, opacity: 0, scale: 0 }}
                            animate={{ 
                                y: -800, 
                                x: photo.x * 5, 
                                opacity: [0, 1, 1, 0], 
                                scale: photo.scale, 
                                rotate: Math.random() * 360
                            }}
                            transition={{ duration: 4, delay: photo.delay, ease: "linear" }}
                            className="absolute z-50"
                        >
                            <div className="w-16 h-16 rounded-full border border-amber-300 overflow-hidden shadow-[0_0_20px_rgba(251,191,36,0.8)] bg-white">
                                <img 
                                    src={FLYING_PHOTO_SRC} 
                                    alt="Papu" 
                                    className="w-full h-full object-cover" 
                                    onError={(e) => e.currentTarget.src = "https://placehold.co/100x100/png?text=Papu"}
                                />
                            </div>
                        </motion.div>
                    ))}
                </div>
            );
        };

        const NewYearView = ({ enterHeavenSequence }) => (
            <div className="flex flex-col items-center pt-8 px-4 pb-32 h-full overflow-y-auto custom-scrollbar bg-gradient-to-b from-[#1a0f00] via-[#2a1a00] to-[#1a0f00] text-amber-50 relative">
                <DiamondRain count={30} />
                <motion.div
                    initial={{ scale: 0 }}
                    animate={{ scale: 1 }}
                    transition={{ type: "spring", stiffness: 50, delay: 0.5 }}
                    className="mb-6 mt-8 relative z-10"
                >
                    <div className="absolute inset-0 bg-[#D4AF37] blur-[50px] opacity-20" />
                    <h1 className="font-great-vibes text-5xl text-center text-[#FFD700] drop-shadow-[0_0_15px_rgba(255,215,0,0.9)]">Happy New Year</h1>
                </motion.div>
                <motion.div 
                    initial={{ opacity: 0, y: 30 }}
                    animate={{ opacity: 1, y: 0 }}
                    transition={{ delay: 1.5, duration: 1 }}
                    className="text-center space-y-3 mb-10 relative z-10"
                >
                    <p className="font-playfair text-xl text-[#FCF6BA]">Nan Muddina Henthi</p>
                    <p className="font-playfair text-2xl text-[#D4AF37] font-bold drop-shadow-md">Nan Papu Devate Kandama</p>
                </motion.div>
                <div className="w-full max-w-sm space-y-6 relative z-10 px-2">
                    <RoyalCard delay={2}>
                        <p className="font-cormorant text-xl text-[#4A3B2A] italic leading-snug">"Nav ebru bega maduve agthivi age agthivi gatti gatti promise ebru mele nu Anne kandama üôè üôè üôè üôè üôè "</p>

                    </RoyalCard>
                    <RoyalCard delay={2.5}>
                        <p className="font-cormorant text-xl text-[#4A3B2A] italic leading-snug">"Nav ebru bega nam SC empire na doodagi build madthivi madde madthivi kandama gatti gatti promise ebru mele nu Anne kandama ü´Ç ü´Ä üîê ‚ú®"</p>
                        <InfinityIcon size={16} className="text-[#D4AF37] mx-auto mt-2" />
                    </RoyalCard>
                </div>
                <motion.button
                    initial={{ opacity: 0 }}
                    animate={{ opacity: 1 }}
                    transition={{ delay: 4 }}
                    onClick={enterHeavenSequence}
                    className="mt-12 px-8 py-3 rounded-full bg-gradient-to-r from-[#D4AF37] via-[#FBF5B7] to-[#AA771C] text-[#5c3a00] font-serif font-bold text-sm shadow-[0_0_20px_rgba(212,175,55,0.6)] hover:scale-105 transition-transform z-20"
                >
                    Enter SC Empire
                </motion.button>
            </div>
        );

        const HeavenEntryView = ({ startEmpireSequence }) => {
            useEffect(() => {
                // Auto transition after 8 seconds
                const timer = setTimeout(() => {
                    startEmpireSequence();
                }, 8000);
                return () => clearTimeout(timer);
            }, []);

            return (
                <div className="relative w-full h-full bg-[#1a0f00] overflow-hidden flex items-center justify-center perspective-1000">
                    {/* High Speed Background Effect */}
                    <motion.div 
                        initial={{ opacity: 0 }}
                        animate={{ opacity: 1 }}
                        className="absolute inset-0 bg-gradient-to-b from-[#3b2a1a] via-[#5c4022] to-black"
                    >
                         <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-80" />
                         {/* Speed lines */}
                         {[...Array(20)].map((_, i) => (
                             <motion.div
                                key={i}
                                className="absolute w-[2px] h-[100px] bg-[#FFD700]/30"
                                initial={{ 
                                    x: Math.random() * window.innerWidth, 
                                    y: -200, 
                                    opacity: 0 
                                }}
                                animate={{ 
                                    y: window.innerHeight + 200, 
                                    opacity: [0, 1, 0] 
                                }}
                                transition={{ 
                                    duration: Math.random() * 0.5 + 0.2, 
                                    repeat: Infinity, 
                                    ease: "linear",
                                    delay: Math.random() * 2
                                }}
                             />
                          ))}
                    </motion.div>
                    
                    <motion.div
                        initial={{ scale: 0.5, opacity: 0 }}
                        animate={{ scale: 1, opacity: 1 }}
                        className="relative z-10 text-center"
                    >
                         <h1 className="font-great-vibes text-5xl text-[#FFD700] drop-shadow-[0_0_20px_rgba(255,215,0,0.8)] mb-4">Proud Entry</h1>
                         <p className="font-playfair text-white/80 text-xl tracking-widest">To Our Home...</p>
                    </motion.div>
                </div>
            );
        };

        const EmpireEntryView = ({ setCurrentTab }) => {
            const [step, setStep] = useState(0);

            useEffect(() => {
                const s1 = setTimeout(() => setStep(1), 5000); 
                const s2 = setTimeout(() => setStep(2), 11000); 
                const s3 = setTimeout(() => setStep(3), 18000); 
                const s4 = setTimeout(() => setStep(4), 24000); 
                const s5 = setTimeout(() => setStep(5), 30000); 
                return () => { clearTimeout(s1); clearTimeout(s2); clearTimeout(s3); clearTimeout(s4); clearTimeout(s5); };
            }, []);

            useEffect(() => {
                if (step === 5) {
                    setTimeout(() => setCurrentTab('home'), 1000);
                }
            }, [step]);

            return (
                <div className="w-full h-full bg-[#050300] relative overflow-hidden flex flex-col items-center justify-center text-center perspective-1000 px-4">
                    <DiamondRain count={50} />
                    <motion.div
                        initial={{ rotateX: 45, scale: 1.2, y: -50, opacity: 0 }}
                        animate={{ rotateX: 0, scale: 1, y: 0, opacity: 1 }}
                        transition={{ duration: 4, ease: "easeOut" }}
                        className="absolute inset-0 z-0 pointer-events-none"
                    >
                        <div className="absolute inset-0 bg-black/70 z-10" />
                        <img src={PALACE_IMG} alt="Palace" className="w-full h-full object-cover" />
                    </motion.div>
                    
                    <AnimatePresence mode='wait'>
                        {step === 0 && (
                            <motion.div
                                key="step0"
                                initial={{ opacity: 0, scale: 0.8, y: 50 }}
                                animate={{ opacity: 1, scale: 1, y: 0 }}
                                exit={{ opacity: 0, scale: 1.2, filter: "blur(10px)" }}
                                transition={{ duration: 1.5 }}
                                className="z-20 relative"
                            >
                                <Castle className="w-20 h-20 mx-auto text-[#FFD700] mb-4 drop-shadow-[0_0_20px_rgba(255,215,0,0.8)]" />
                                <h1 className="font-playfair text-5xl md:text-6xl font-bold tracking-widest text-transparent bg-clip-text bg-gradient-to-b from-[#FFD700] via-[#FFFACD] to-[#DAA520]" style={{textShadow: "0px 4px 10px rgba(0,0,0,0.5)"}}>SC EMPIRE</h1>
                                <div className="w-24 h-1 bg-[#D4AF37] mx-auto mt-4 rounded-full shadow-[0_0_10px_#D4AF37]" />
                                <p className="text-[#F0E68C] font-serif uppercase tracking-[0.4em] mt-4 font-bold text-xs">Welcome Home My Queen</p>
                            </motion.div>
                        )}
                        {step === 1 && (
                            <motion.div
                                key="step1"
                                initial={{ opacity: 0, y: 50 }}
                                animate={{ opacity: 1, y: 0 }}
                                exit={{ opacity: 0, y: -50 }}
                                transition={{ duration: 1 }}
                                className="z-20 w-full max-w-sm"
                            >
                                <div className="bg-[#1a0f00]/60 backdrop-blur-md border border-[#D4AF37] p-6 rounded-t-3xl rounded-b-3xl shadow-[0_0_30px_rgba(212,175,55,0.2)]">
                                    <h2 className="font-cormorant text-2xl md:text-3xl text-[#FFF8DC] leading-relaxed italic drop-shadow-lg">"Nav ebru bega maduve agthivi age agthivi atti gatti promise ebru mele nu anne kandama"</h2>
                                    <div className="flex justify-center mt-4"><Heart className="w-8 h-8 text-rose-500 animate-pulse" fill="currentColor" /></div>
                                </div>
                            </motion.div>
                        )}
                        {step === 2 && (
                            <motion.div
                                key="step2"
                                initial={{ opacity: 0, scale: 0.9 }}
                                animate={{ opacity: 1, scale: 1 }}
                                exit={{ opacity: 0 }}
                                transition={{ duration: 1 }}
                                className="z-20 w-full max-w-sm"
                            >
                                <div className="bg-[#1a0f00]/60 backdrop-blur-md border-2 border-[#D4AF37] p-6 rounded-3xl shadow-[0_0_30px_rgba(212,175,55,0.3)]">
                                    <Crown className="w-10 h-10 text-[#FFD700] mx-auto mb-3" />
                                    <h2 className="font-playfair text-xl md:text-2xl text-white leading-relaxed">"Nav ebru seri <span className="text-[#FFD700] font-bold">Nam SC Empire</span> na Doodadagi Build madthivi madde madthivi gatti gatti promise ebru mele nu anne kandama"</h2>
                                </div>
                            </motion.div>
                        )}
                        {step === 3 && (
                            <motion.div
                                key="step3"
                                initial={{ opacity: 0, scale: 0.5 }}
                                animate={{ opacity: 1, scale: 1 }}
                                exit={{ opacity: 0, scale: 1.5 }}
                                transition={{ type: "spring", stiffness: 100 }}
                                className="z-20 px-4 relative"
                            >
                                <div className="absolute inset-0 bg-[#D4AF37] blur-[80px] opacity-30" />
                                <h1 className="font-great-vibes text-6xl text-[#FFD700] mb-4 drop-shadow-[0_0_30px_rgba(255,215,0,1)]">Welcome to <br/> 2026</h1>
                                <p className="font-playfair text-xl text-white font-bold tracking-wide">Nan Muddina Henthi</p>
                            </motion.div>
                        )}
                        {step === 4 && (
                            <motion.div
                                key="step4"
                                initial={{ opacity: 0, y: 50 }}
                                animate={{ opacity: 1, y: 0 }}
                                exit={{ opacity: 0 }}
                                transition={{ duration: 1 }}
                                className="z-20 w-full max-w-sm"
                            >
                                <div className="bg-[#1a0f00]/60 backdrop-blur-md border border-[#D4AF37]/50 p-6 rounded-3xl shadow-[0_0_20px_rgba(212,175,55,0.2)]">
                                    <InfinityIcon className="w-12 h-12 text-rose-400 mx-auto mb-4" />
                                    <h2 className="font-cormorant text-2xl text-[#FFF8DC] leading-relaxed">"CSourworldforever"</h2>
                                    <p className="font-playfair text-[#FFD700] mt-4 text-lg">ShridharChaithraforever</p>
                                </div>
                            </motion.div>
                        )}
                        {step === 5 && (
                            <motion.div
                                key="step5"
                                initial={{ opacity: 0 }}
                                animate={{ opacity: 1 }}
                                className="z-20"
                            >
                                <p className="text-[#D4AF37] font-playfair text-lg tracking-widest">Entering Paradise...</p>
                            </motion.div>
                        )}
                    </AnimatePresence>
                </div>
            );
        };

        const HomeView = () => (
            <div className="flex flex-col items-center pt-10 px-6 pb-32 h-full overflow-y-auto custom-scrollbar">
                <motion.div 
                    initial={{ opacity: 0, y: -20 }}
                    animate={{ opacity: 1, y: 0 }}
                    className="w-full max-w-md text-center"
                >
                    <motion.div 
                        animate={{ rotate: [0, 5, -5, 0] }} 
                        transition={{ duration: 6, repeat: Infinity, ease: "easeInOut" }}
                        className="inline-block mb-4"
                    >
                        <div className="px-5 py-2 rounded-full bg-gradient-to-r from-[#fffbf0] to-[#fff3cd] border border-[#e6cba9] shadow-sm">
                            <span className="text-[#8B5E3C] font-serif text-xs font-bold tracking-[0.2em] uppercase flex items-center gap-2">
                                <Star size={10} className="fill-[#8B5E3C]" /> My Universe <Star size={10} className="fill-[#8B5E3C]" />
                            </span>
                        </div>
                    </motion.div>
                    <h2 className="font-playfair text-4xl text-[#5c3a00] leading-[1.1] mb-6 drop-shadow-sm">Best Precious<br/><GoldText className="text-5xl font-great-vibes block mt-2 p-1">Universe Queen</GoldText></h2>
                    <div className="flex items-center justify-center gap-4 mb-8 opacity-60">
                        <div className="h-[1px] w-10 bg-[#D4AF37]" />
                        <Gem size={18} className="text-[#D4AF37]" />
                        <div className="h-[1px] w-10 bg-[#D4AF37]" />
                    </div>
                    <div className="bg-white/60 backdrop-blur-xl border border-[#FBF5B7] rounded-2xl shadow-[0_10px_40px_-10px_rgba(168,119,28,0.15)] p-5 relative overflow-hidden mb-6 text-center py-8">
                        <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-[#D4AF37] to-transparent opacity-50" />
                        <h3 className="font-playfair text-2xl text-[#8B5E3C] mb-2">Purest Diamond</h3>
                        <p className="font-cormorant text-xl text-gray-600 mt-2 leading-relaxed italic">"You shine brighter than all the stars in the sky combined, my love."</p>
                    </div>
                    <div className="grid grid-cols-2 gap-4 w-full">
                        <div className="bg-white/60 backdrop-blur-xl border border-[#FBF5B7] rounded-2xl shadow-sm p-5 flex flex-col items-center justify-center py-8 bg-gradient-to-br from-white to-amber-50">
                            <Sun className="w-8 h-8 text-[#D4AF37] mb-3" />
                            <span className="font-playfair text-[#5c3a00] text-sm font-bold uppercase tracking-widest">Strength</span>
                        </div>
                        <div className="bg-white/60 backdrop-blur-xl border border-[#FBF5B7] rounded-2xl shadow-sm p-5 flex flex-col items-center justify-center py-8 bg-gradient-to-br from-white to-rose-50">
                            <Heart className="w-8 h-8 text-rose-400 mb-3 fill-rose-100" />
                            <span className="font-playfair text-[#5c3a00] text-sm font-bold uppercase tracking-widest">Happiness</span>
                        </div>
                    </div>
                    <div className="mt-10 relative p-6 border-t border-amber-100">
                        <p className="font-great-vibes text-3xl text-[#996515]">"Everything & Everyone"</p>
                    </div>
                </motion.div>
            </div>
        );

        const FeelingsView = () => (
            <div className="pt-8 px-4 pb-32 h-full overflow-y-auto w-full max-w-lg mx-auto custom-scrollbar">
                <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className="text-center mb-8">
                    <h2 className="font-playfair text-3xl text-[#5c3a00]">My Divine Feelings</h2>
                    <p className="font-cormorant text-base text-[#8B5E3C] mt-2 italic">Read with your beautiful heart...</p>
                </motion.div>
                <div className="space-y-6">
                    {TEXT_LINES.map((line, index) => (
                        <motion.div
                            key={index}
                            initial={{ opacity: 0, y: 30 }}
                            whileInView={{ opacity: 1, y: 0 }}
                            viewport={{ once: true, margin: "-20px" }}
                            transition={{ delay: 0.1, duration: 0.6 }}
                        >
                            <div className={`
                                relative p-6 rounded-xl border border-double border-4
                                ${index % 2 === 0 
                                    ? 'bg-[#FFFDF7] border-[#faeec7] text-left rounded-tr-[30px] rounded-bl-[30px]' 
                                    : 'bg-[#fffafc] border-[#fce7f3] text-center rounded-tl-[30px] rounded-br-[30px]'
                                } shadow-sm
                            `}>
                                <div className="absolute -top-3 left-1/2 -translate-x-1/2 bg-white px-2">
                                    <Heart size={12} className="text-[#D4AF37] fill-[#D4AF37]" />
                                </div>
                                <p className="relative z-10 font-cormorant text-xl text-[#4a3b2a] leading-relaxed font-medium">{line}</p>
                            </div>
                        </motion.div>
                    ))}
                </div>
            </div>
        );

        const PhotosView = () => {
            const [currentIndex, setCurrentIndex] = useState(0);
            const nextSlide = () => setCurrentIndex((prev) => (prev + 1) % IMAGES.length);
            const prevSlide = () => setCurrentIndex((prev) => (prev - 1 + IMAGES.length) % IMAGES.length);

            return (
                <div className="flex flex-col items-center justify-center h-full pb-28 px-4">
                    <h2 className="font-playfair text-3xl text-[#5c3a00] mb-6">Our Divine Moments</h2>
                    <div className="relative w-full max-w-sm aspect-[3/4] group perspective-1000">
                        <div className="absolute inset-0 bg-[#D4AF37] blur-[50px] opacity-20 animate-pulse" />
                        <div className="relative w-full h-full p-2 bg-gradient-to-br from-[#BF953F] via-[#FCF6BA] to-[#B38728] rounded-[24px] shadow-2xl transform transition-transform duration-500 hover:scale-[1.01]">
                            <div className="w-full h-full bg-white rounded-[20px] overflow-hidden border-2 border-[#5c3a00]/10 relative">
                                <AnimatePresence mode='wait'>
                                    <motion.div
                                        key={currentIndex}
                                        initial={{ opacity: 0, scale: 1.1 }}
                                        animate={{ opacity: 1, scale: 1 }}
                                        exit={{ opacity: 0 }}
                                        transition={{ duration: 0.8 }}
                                        className="w-full h-full"
                                    >
                                        <img 
                                            src={IMAGES[currentIndex]} 
                                            alt={`Precious Moements ${currentIndex + 1}`} 
                                            className="w-full h-full object-cover"
                                            onError={(e) => {
                                                e.currentTarget.src = `https://placehold.co/600x800/fff7ed/d97706?text=${currentIndex + 1}+%E2%99%A5`;
                                            }}
                                        />
                                        <div className="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-[#5c3a00]/60 to-transparent flex items-end justify-center pb-4">
                                            <span className="text-white/90 font-great-vibes text-xl tracking-wide">Precious Moements {currentIndex + 1}</span>
                                        </div>
                                    </motion.div>
                                </AnimatePresence>
                            </div>
                        </div>
                        <button onClick={prevSlide} className="absolute left-[-10px] top-1/2 -translate-y-1/2 w-10 h-10 bg-[#FFFDF7] border border-[#D4AF37] rounded-full shadow-xl flex items-center justify-center text-[#8B5E3C] hover:scale-110 transition-transform z-20"><span className="text-xl pb-1">‚Üê</span></button>
                        <button onClick={nextSlide} className="absolute right-[-10px] top-1/2 -translate-y-1/2 w-10 h-10 bg-[#FFFDF7] border border-[#D4AF37] rounded-full shadow-xl flex items-center justify-center text-[#8B5E3C] hover:scale-110 transition-transform z-20"><span className="text-xl pb-1">‚Üí</span></button>
                    </div>
                    <div className="mt-8 flex gap-2">
                        {IMAGES.map((_, i) => (
                            <motion.div 
                                key={i} 
                                animate={{ scale: i === currentIndex ? 1.2 : 1, backgroundColor: i === currentIndex ? "#D4AF37" : "#E5E7EB" }}
                                className={`w-2 h-2 rounded-full border border-white shadow-sm`} 
                            />
                        ))}
                    </div>
                </div>
            );
        };

        const ForeverView = () => (
            <div className="flex flex-col items-center justify-center h-full pb-28 text-center px-4">
                <div className="relative mb-8">
                    <motion.div
                        animate={{ rotate: 360, scale: [1, 1.1, 1] }}
                        transition={{ rotate: { duration: 20, repeat: Infinity, ease: "linear" }, scale: { duration: 3, repeat: Infinity } }}
                        className="absolute inset-[-40px] bg-gradient-to-r from-[#D4AF37]/0 via-[#D4AF37]/20 to-[#D4AF37]/0 rounded-full blur-2xl"
                    />
                    <motion.div
                        initial={{ scale: 0, opacity: 0 }}
                        animate={{ scale: 1, opacity: 1 }}
                        transition={{ type: "spring", stiffness: 60, damping: 12, delay: 0.2 }}
                    >
                        <Crown className="w-24 h-24 text-[#D4AF37] drop-shadow-[0_0_25px_rgba(212,175,55,0.6)] fill-[#D4AF37]/10" strokeWidth={1} />
                    </motion.div>
                </div>
                <div className="space-y-6 z-10">
                    <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.5 }}>
                        <h2 className="font-playfair text-2xl md:text-3xl font-bold text-[#5c3a00] mb-2">CSourworldforever</h2>
                        <div className="h-1 w-16 mx-auto bg-gradient-to-r from-transparent via-[#D4AF37] to-transparent" />
                    </motion.div>
                    <motion.h3 initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 1 }} className="font-cormorant text-xl text-[#8B5E3C]">ShridharChaithraforever</motion.h3>
                    <motion.div initial={{ scale: 0 }} animate={{ scale: 1 }} transition={{ delay: 1.5, type: "spring" }} className="flex items-center justify-center gap-3 text-rose-500 my-6">
                        <span className="h-[2px] w-12 bg-gradient-to-r from-transparent to-rose-300"></span>
                        <div className="relative">
                            <InfinityIcon size={36} className="text-rose-500 drop-shadow-lg" />
                            <Heart size={14} className="absolute -top-1 -right-1 text-[#D4AF37] fill-[#D4AF37] animate-bounce" />
                        </div>
                        <span className="h-[2px] w-12 bg-gradient-to-l from-transparent to-rose-300"></span>
                    </motion.div>
                    <div className="bg-gradient-to-r from-[#D4AF37] via-[#FBF5B7] to-[#D4AF37] border-none text-[#5c3a00] transform hover:scale-105 transition-transform duration-500 shadow-xl p-5 rounded-2xl">
                        <h1 className="font-great-vibes text-4xl md:text-5xl pt-2 pb-1 drop-shadow-sm">Kandamas Forever</h1>
                    </div>
                </div>
            </div>
        );

        function App() {
            const [currentTab, setCurrentTab] = useState('splash');
            const [isPlaying, setIsPlaying] = useState(false);
            const audioRef = useRef(null);
            
            // Refs for constrained confetti
            const confettiInstance = useRef(null);

            // Callback ref to initialize confetti when canvas mounts
            const setConfettiCanvas = useCallback((node) => {
                if (node !== null && !confettiInstance.current) {
                    confettiInstance.current = confetti.create(node, {
                        resize: true,
                        useWorker: false // Disable worker to prevent blob issues
                    });
                }
            }, []);

            const toggleMusic = () => {
                if (audioRef.current) {
                    if (isPlaying) {
                        audioRef.current.pause();
                    } else {
                        audioRef.current.play().catch(e => console.log("Audio play failed:", e));
                    }
                    setIsPlaying(!isPlaying);
                }
            };

            const startJourney = () => {
                setCurrentTab('journey');
                if (audioRef.current) {
                    audioRef.current.volume = 0.6;
                    audioRef.current.play().catch(() => {});
                    setIsPlaying(true);
                }
            };
            
            // --- NEW: SECRET SKIP FUNCTION ---
            const skipToHome = () => {
                setCurrentTab('home');
                if (audioRef.current) {
                    audioRef.current.volume = 0.6;
                    audioRef.current.play().catch(() => {});
                    setIsPlaying(true);
                }
            };

            const enterHeavenSequence = () => {
                setCurrentTab('heavenEntry');
            };

            const startEmpireSequence = () => {
                setCurrentTab('empireEntry');
            };

            // Global Confetti Effect - Triggered on EVERY tab change using constrained canvas
            useEffect(() => {
                const duration = 2000; 
                const end = Date.now() + duration;

                const frame = () => {
                    // Safety check if instance is ready
                    if (confettiInstance.current) {
                        confettiInstance.current({
                            particleCount: 5,
                            angle: 60,
                            spread: 55,
                            origin: { x: 0 },
                            colors: ['#FFD700', '#FFFFFF', '#FFA500']
                        });
                        
                        confettiInstance.current({
                            particleCount: 5,
                            angle: 120,
                            spread: 55,
                            origin: { x: 1 },
                            colors: ['#FFD700', '#FFFFFF', '#FFA500']
                        });
                    }

                    if (Date.now() < end) {
                        requestAnimationFrame(frame);
                    }
                };
                
                frame();
            }, [currentTab]);

            return (
                <div className="w-full h-screen bg-[#FFFDF7] text-gray-800 overflow-hidden relative font-sans selection:bg-[#FBF5B7]">
                    <ClickSparkle />
                    <div className="fixed inset-0 bg-gradient-to-br from-[#FFFEFA] via-[#FFF9E6] to-[#FFF0F5] z-0" />
                    <ParticleBackground />

                    <audio ref={audioRef} src={MUSIC_URL} loop />
                    {currentTab !== 'splash' && (
                        <button 
                            onClick={toggleMusic}
                            className="fixed top-4 right-4 z-50 p-2 bg-white/60 backdrop-blur-md rounded-full shadow-lg border border-[#FBF5B7] text-[#8B5E3C] hover:bg-[#FFF8DC] transition-colors"
                        >
                            {isPlaying ? <Volume2 size={20} /> : <VolumeX size={20} />}
                        </button>
                    )}

                    <main className="relative z-10 w-full h-full max-w-md mx-auto bg-white/0 md:shadow-2xl md:border-x border-white/50">
                        {/* Constrained Confetti Canvas */}
                        <canvas 
                            ref={setConfettiCanvas} 
                            className="absolute inset-0 pointer-events-none z-50 w-full h-full"
                        />

                        <AnimatePresence mode='wait'>
                            {currentTab === 'splash' && (
                                <motion.div key="splash" className="h-full" exit={{ opacity: 0 }}>
                                    <SplashView startJourney={startJourney} skipToHome={skipToHome} />
                                </motion.div>
                            )}
                            {currentTab === 'journey' && (
                                <motion.div key="journey" className="h-full" exit={{ opacity: 0 }}>
                                    <JourneyView setCurrentTab={setCurrentTab} />
                                </motion.div>
                            )}
                            {currentTab === 'newYear' && (
                                <motion.div key="newYear" className="h-full" initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}>
                                    <NewYearView enterHeavenSequence={enterHeavenSequence} />
                                </motion.div>
                            )}
                            {currentTab === 'heavenEntry' && (
                                <motion.div key="heavenEntry" className="h-full" initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}>
                                    <HeavenEntryView startEmpireSequence={startEmpireSequence} />
                                </motion.div>
                            )}
                            {currentTab === 'empireEntry' && (
                                <motion.div key="empireEntry" className="h-full" initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}>
                                    <EmpireEntryView setCurrentTab={setCurrentTab} />
                                </motion.div>
                            )}
                            {currentTab === 'home' && (
                                <motion.div key="home" className="h-full" initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}>
                                    <HomeView />
                                </motion.div>
                            )}
                            {currentTab === 'feelings' && (
                                <motion.div key="feelings" className="h-full" initial={{ opacity: 0, x: 50 }} animate={{ opacity: 1, x: 0 }} exit={{ opacity: 0, x: -50 }}>
                                    <FeelingsView />
                                </motion.div>
                            )}
                            {currentTab === 'photos' && (
                                <motion.div key="photos" className="h-full" initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}>
                                    <PhotosView />
                                </motion.div>
                            )}
                            {currentTab === 'forever' && (
                                <motion.div key="forever" className="h-full" initial={{ opacity: 0, scale: 0.9 }} animate={{ opacity: 1, scale: 1 }} exit={{ opacity: 0 }}>
                                    <ForeverView />
                                </motion.div>
                            )}
                        </AnimatePresence>
                    </main>

                    {['home', 'feelings', 'photos', 'forever'].includes(currentTab) && (
                        <motion.div 
                            initial={{ y: 100 }}
                            animate={{ y: 0 }}
                            className="fixed bottom-0 left-0 right-0 z-50 flex justify-center pb-6 pt-4 pointer-events-none"
                        >
                            <div className="pointer-events-auto bg-white/90 backdrop-blur-xl border border-[#FBF5B7] shadow-[0_10px_50px_rgba(212,175,55,0.25)] rounded-full px-6 py-3 flex gap-6 items-center justify-between max-w-sm mx-4">
                                <button onClick={() => setCurrentTab('home')} className={`flex flex-col items-center gap-1 transition-all duration-300 ${currentTab === 'home' ? 'text-[#D4AF37] scale-110 drop-shadow-sm' : 'text-gray-300 hover:text-[#D4AF37]/60'}`}>
                                    <Star size={20} fill={currentTab === 'home' ? "currentColor" : "none"} />
                                    <span className="text-[9px] font-bold tracking-[0.2em] uppercase mt-1">Home</span>
                                </button>
                                <button onClick={() => setCurrentTab('feelings')} className={`flex flex-col items-center gap-1 transition-all duration-300 ${currentTab === 'feelings' ? 'text-rose-500 scale-110 drop-shadow-sm' : 'text-gray-300 hover:text-rose-300'}`}>
                                    <Heart size={20} fill={currentTab === 'feelings' ? "currentColor" : "none"} />
                                    <span className="text-[9px] font-bold tracking-[0.2em] uppercase mt-1">Love</span>
                                </button>
                                <button onClick={() => setCurrentTab('photos')} className={`flex flex-col items-center gap-1 transition-all duration-300 ${currentTab === 'photos' ? 'text-[#D4AF37] scale-110 drop-shadow-sm' : 'text-gray-300 hover:text-[#D4AF37]/60'}`}>
                                    <ImageIcon size={20} />
                                    <span className="text-[9px] font-bold tracking-[0.2em] uppercase mt-1">Pics</span>
                                </button>
                                <button onClick={() => setCurrentTab('forever')} className={`flex flex-col items-center gap-1 transition-all duration-300 ${currentTab === 'forever' ? 'text-purple-600 scale-110 drop-shadow-sm' : 'text-gray-300 hover:text-purple-400'}`}>
                                    <InfinityIcon size={20} />
                                    <span className="text-[9px] font-bold tracking-[0.2em] uppercase mt-1">Endless</span>
                                </button>
                            </div>
                        </motion.div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

